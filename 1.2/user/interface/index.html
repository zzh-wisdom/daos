



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Distributed Asynchronous Object Storage">
      
      
        <link rel="canonical" href="https://cdurf1.github.io/user/interface/">
      
      
        <meta name="author" content="DAOS Project">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-4.6.3">
    
    
      
        <title>Native Programming Interface - DAOS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/version-select.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#native-programming-interface" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://cdurf1.github.io/" title="DAOS" aria-label="DAOS" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../../intel_logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              DAOS
            </span>
            <span class="md-header-nav__topic">
              
                Native Programming Interface
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/cdurf1/cdurf1.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    daos-stack/daos
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../overview/terminology/" class="md-tabs__link">
          Architecture Overview
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../admin/hardware/" class="md-tabs__link">
          Administration Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../container/" class="md-tabs__link md-tabs__link--active">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../release/releaseNote_v1_0/" class="md-tabs__link">
          Releases
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../dev/development/" class="md-tabs__link">
          Developer Zone
        </a>
      
    </li>
  

      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://cdurf1.github.io/" title="DAOS" class="md-nav__button md-logo">
      
        <img alt="logo" src="../../intel_logo.png" width="48" height="48">
      
    </a>
    DAOS
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/cdurf1/cdurf1.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    daos-stack/daos
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Architecture Overview
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Architecture Overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/terminology/" title="Terminology" class="md-nav__link">
      Terminology
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/storage/" title="Storage Model" class="md-nav__link">
      Storage Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/transaction/" title="Transaction Model" class="md-nav__link">
      Transaction Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/fault/" title="Fault Model" class="md-nav__link">
      Fault Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/security/" title="Security Model" class="md-nav__link">
      Security Model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Administration Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Administration Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/hardware/" title="Hardware Requirements" class="md-nav__link">
      Hardware Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/installation/" title="Software Installation" class="md-nav__link">
      Software Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/predeployment_check/" title="Pre-deployment Checklist" class="md-nav__link">
      Pre-deployment Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/deployment/" title="System Deployment" class="md-nav__link">
      System Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/administration/" title="System Administration" class="md-nav__link">
      System Administration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/pool_operations/" title="Pool Operations" class="md-nav__link">
      Pool Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/tiering_uns/" title="Tiering and Unified Namespace" class="md-nav__link">
      Tiering and Unified Namespace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/performance_tuning/" title="Performance Tuning" class="md-nav__link">
      Performance Tuning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/utilities_examples/" title="Utilities and Usage Examples" class="md-nav__link">
      Utilities and Usage Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../admin/env_variables/" title="Environment Variables" class="md-nav__link">
      Environment Variables
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../container/" title="Container Management" class="md-nav__link">
      Container Management
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Native Programming Interface
      </label>
    
    <a href="./" title="Native Programming Interface" class="md-nav__link md-nav__link--active">
      Native Programming Interface
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-against-the-daos-library" class="md-nav__link">
    Building against the DAOS library
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#daos-api-reference" class="md-nav__link">
    DAOS API Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-bindings" class="md-nav__link">
    Python Bindings
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pydaos" class="md-nav__link">
    pydaos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pydaosraw" class="md-nav__link">
    pydaos.raw
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#layout" class="md-nav__link">
    Layout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctypes" class="md-nav__link">
    Ctypes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    Logging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-bindings" class="md-nav__link">
    Go Bindings
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../posix/" title="POSIX Namespace" class="md-nav__link">
      POSIX Namespace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mpi-io/" title="MPI-IO Support" class="md-nav__link">
      MPI-IO Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hdf5/" title="HDF5 Support" class="md-nav__link">
      HDF5 Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spark/" title="Spark and Hadoop" class="md-nav__link">
      Spark and Hadoop
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Releases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/releaseNote_v1_0/" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Developer Zone
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Developer Zone
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/development/" title="Dev Environment" class="md-nav__link">
      Dev Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dev/contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/daos-stack/daos/blob/master/src/README.md" title="DAOS Internals" class="md-nav__link">
      DAOS Internals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../html/" title="DAOS API Documentation" class="md-nav__link">
      DAOS API Documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://wiki.hpdd.intel.com" title="Community Wiki" class="md-nav__link">
      Community Wiki
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://wiki.hpdd.intel.com/display/DC/Roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://daos.groups.io/g/daos" title="Mailing list" class="md-nav__link">
      Mailing list
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://jira.hpdd.intel.com/projects/DAOS" title="Issue tracker" class="md-nav__link">
      Issue tracker
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-against-the-daos-library" class="md-nav__link">
    Building against the DAOS library
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#daos-api-reference" class="md-nav__link">
    DAOS API Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-bindings" class="md-nav__link">
    Python Bindings
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pydaos" class="md-nav__link">
    pydaos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pydaosraw" class="md-nav__link">
    pydaos.raw
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#layout" class="md-nav__link">
    Layout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ctypes" class="md-nav__link">
    Ctypes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    Logging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-bindings" class="md-nav__link">
    Go Bindings
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cdurf1/cdurf1.github.io/edit/master/docs/user/interface.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="native-programming-interface">Native Programming Interface<a class="headerlink" href="#native-programming-interface" title="Permanent link">&para;</a></h1>
<h2 id="building-against-the-daos-library">Building against the DAOS library<a class="headerlink" href="#building-against-the-daos-library" title="Permanent link">&para;</a></h2>
<p>To build application or I/O middleware against the native DAOS API, include
the <code>daos.h</code> header file in your program and link with <code>-Ldaos</code>. Examples are
available under <code>src/tests</code>.</p>
<h2 id="daos-api-reference">DAOS API Reference<a class="headerlink" href="#daos-api-reference" title="Permanent link">&para;</a></h2>
<p><code>libdaos</code> is written in C and uses Doxygen comments that are added to C header
files. The Doxygen documentation is available 
<a href="https://daos-stack.github.io/html/">here</a>.</p>
<h2 id="python-bindings">Python Bindings<a class="headerlink" href="#python-bindings" title="Permanent link">&para;</a></h2>
<p>A python module called <a href="https://github.com/daos-stack/daos/blob/master/src/client/pydaos">PyDAOS</a>
provides the DAOS API to python users.</p>
<h3 id="pydaos">pydaos<a class="headerlink" href="#pydaos" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/daos-stack/daos/blob/master/src/client/pydaos/pydaos_core.py">pydaos</a>
provides a native DAOS python interface exported by a C module. It integrates
the DAOS key-value store API with python dictionaries. Only strings are
supported for both the key and value for now.</p>
<p>Key-value pairs can be inserted/looked up one at a time (see put/get) or
in bulk (see bput/bget) taking a python dict as an input. The bulk
operations are issued in parallel (up to 16 operations in flight) to
maximize the operation rate.</p>
<p>Key-value pairs are deleted via the put/bput operations by setting the value
to either None or the empty string. Once deleted, the key won't be reported
during iteration. It also supports the del operation via 'del dkv.key'.
The DAOS KV objects behave like a python dictionary and supports:</p>
<ul>
<li>
<p>'dkv[key]' which invokes 'dkv.get(key)'</p>
</li>
<li>
<p>'dkv[key] = val' which invokes 'dkv.put(key, val)'</p>
</li>
<li>
<p>'for key in dkv:' allows to walk through the key space via the support of
  python iterators</p>
</li>
<li>
<p>'if key is in dkv:' allows to test whether a give key is present in the
  DAOS KV store.</p>
</li>
<li>
<p>'len(dkv)' returns the number of key-value pairs.</p>
</li>
<li>
<p>'bool(dkv)' reports 'False' if there is no key-value pairs in the DAOS KV
  and 'True' otherwise.</p>
</li>
</ul>
<p>Python iterators are supported, which means that "for key in kvobj:" will
allow you to walk through the key space.
For each method, a PyDError exception is raised with a proper DAOS error code
(in string format) if the operation cannot be completed.</p>
<p>Both python 2.7 and 3.x are supported.</p>
<h3 id="pydaosraw">pydaos.raw<a class="headerlink" href="#pydaosraw" title="Permanent link">&para;</a></h3>
<p>The pydaos.raw submodule provides access to DAOS API functionality via Ctypes
and was developed with an emphasis on test use cases. While the majority of unit
tests are written in C, higher-level tests are written primarily using the
Python API. Interfaces are provided for accessing DAOS management and DAOS API
functionality from Python. This higher level interface allows a faster
turnaround time on implementing test cases for DAOS.</p>
<h4 id="layout">Layout<a class="headerlink" href="#layout" title="Permanent link">&para;</a></h4>
<p>The Python API is split into several files based on functionality:</p>
<ul>
<li>The Python object API:
  <a href="https://github.com/daos-stack/daos/tree/master/src/client/pydaos/raw/daos_api.py">daos_api.py</a>.</li>
<li>The mapping of C structures to Python classes
  <a href="https://github.com/daos-stack/daos/tree/master/src/client/pydaos/raw/daos_cref.py">daos_cref.py</a></li>
</ul>
<p>High-level abstraction classes exist to manipulate DAOS storage:</p>
<pre><code class="python">class DaosPool(object)
class DaosContainer(object)
class DaosObj(object)
class IORequest(object)
</code></pre>

<p><code>DaosPool</code> is a Python class representing a DAOS pool. All pool-related
functionality is exposed from this class. Operations such as creating/destroying
a pool, connecting to a pool, and adding a target to a storage pool are
supported.</p>
<p><code>DaosContainer</code> is a Python class representing a DAOS container.
As with the <code>DaosPool</code> class, all container-related functionality is exposed
here. This class also exposes abstracted wrapper functions for the flow of
creating and committing an object to a DAOS container.</p>
<p><code>DaosObj</code> is a Python class representing a DAOS object. Functionality such as
creating/deleting objects in a container, 'punching' objects (delete an object
from the specified transaction only), and object query.</p>
<p><code>IORequest</code> is a Python class representing a read or write request against a
DAOS object.</p>
<p>Several classes exist for management purposes as well:</p>
<pre><code class="python">class DaosContext(object)
class DaosLog
class DaosApiError(Exception)
</code></pre>

<p><code>DaosContext</code> is a wrapper around the DAOS libraries. It is initialized with the
path where DAOS libraries can be found.</p>
<p><code>DaosLog</code> exposes functionality to write messages to the DAOS client log.</p>
<p><code>DaosApiError</code> is a custom exception class raised by the API internally in the
event of a failed DAOS action.</p>
<p>Most functions exposed in the DAOS C API support both synchronous and
asynchronous execution, and the Python API exposes this same functionality.
Each API takes an input event. <code>DaosEvent</code> is the Python representation of this
event. If the input event is <code>NULL</code>, the call is synchronous. If an event is
supplied, the function will return immediately after submitting API requests to
the underlying stack and the user can poll and query the event for completion.</p>
<h4 id="ctypes">Ctypes<a class="headerlink" href="#ctypes" title="Permanent link">&para;</a></h4>
<p>Ctypes is a built-in Python module for interfacing Python with existing
libraries written in C/C++. The Python API is built as an object-oriented
wrapper around the DAOS libraries utilizing ctypes.</p>
<p>Ctypes documentation can be found here <a href="https://docs.python.org/3/library/ctypes.html">https://docs.python.org/3/library/ctypes.html</a></p>
<p>The following demonstrates a simplified example of creating a Python wrapper
for the C function <code>daos_pool_tgt_exclude_out</code>, with each input parameter to the
C function being cast via ctypes. This also demonstrates struct representation via ctypes:</p>
<pre><code class="C">// daos_exclude.c

#include &lt;stdio.h&gt;

int
daos_pool_tgt_exclude_out(const uuid_t uuid, const char *grp,
                          const d_rank_list_t *svc, struct d_tgt_list *tgts,
                          daos_event_t *ev);
</code></pre>

<p>All input parameters must be represented via ctypes. If a struct is required as
an input parameter, a corresponding Python class can be created. For struct <code>d_tgt_list</code>:</p>
<pre><code class="c">struct d_tgt_list {
    d_rank_t    *tl_ranks;
    int32_t     *tl_tgts;
    uint32_t    tl_nr;
};
</code></pre>

<pre><code class="python">class DTgtList(ctypes.Structure):
    _fields_ = [(&quot;tl_ranks&quot;, ctypes.POINTER(ctypes.c_uint32)),
                (&quot;tl_tgts&quot;, ctypes.POINTER(ctypes.c_int32)),
                (&quot;tl_nr&quot;, ctypes.c_uint32)]
</code></pre>

<p>The shared object containing <code>daos_pool_tgt_exclude_out</code> can then be imported
and the function called directly:</p>
<pre><code class="python"># api.py

import ctypes
import uuid
import conversion # utility library to convert C &lt;---&gt; Python UUIDs

# init python variables
p_uuid = str(uuid.uuid4())
p_tgts = 2
p_ranks = DaosPool.__pylist_to_array([2])

# cast python variables via ctypes as necessary
c_uuid = str_to_c_uuid(p_uuid)
c_grp = ctypes.create_string_buffer(b&quot;daos_group_name&quot;)
c_svc = ctypes.POINTER(2) # ensure pointers are cast/passed as such
c_tgt_list = ctypes.POINTER(DTgtList(p_ranks, p_tgts, 2))) # again, DTgtList must be passed as pointer

# load the shared object
my_lib = ctypes.CDLL('/full/path/to/daos_exclude.so')

# now call it
my_lib.daos_pool_tgt_exclude_out(c_uuid, c_grp, c_svc, c_tgt_list, None)
</code></pre>

<h4 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h4>
<p>The API was designed using the EAFP (<b>E</b>asier to <b>A</b>sk
<b>F</b>orgiveness than get <b>P</b>ermission) idiom. A given function will
raise a custom exception on error state, <code>DaosApiError</code>.
A user of the API is expected to catch and handle this exception as needed:</p>
<pre><code class="python"># catch and log
try:
    daos_some_action()
except DaosApiError as e:
    self.d_log.ERROR(&quot;My DAOS action encountered an error!&quot;)
</code></pre>

<h4 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">&para;</a></h4>
<p>The Python DAOS API exposes functionality to log messages to the DAOS client log.
Messages can be logged as <code>INFO</code>, <code>DEBUG</code>, <code>WARN</code>, or <code>ERR</code> log levels.
The DAOS log object must be initialized with the environmental context in which to run:</p>
<pre><code class="python">from pydaos.raw import DaosLog

self.d_log = DaosLog(self.context)

self.d_log.INFO(&quot;FYI&quot;)
self.d_log.DEBUG(&quot;Debugging code&quot;)
self.d_log.WARNING(&quot;Be aware, may be issues&quot;)
self.d_log.ERROR(&quot;Something went very wrong&quot;)
</code></pre>

<h2 id="go-bindings">Go Bindings<a class="headerlink" href="#go-bindings" title="Permanent link">&para;</a></h2>
<p>API bindings for Go<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup> are also available.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>https://github.com/daos-stack/daos/blob/master/src/client/pydaos/raw/README.md&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>https://godoc.org/github.com/daos-stack/go-daos/pkg/daos&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../container/" title="Container Management" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Container Management
              </span>
            </div>
          </a>
        
        
          <a href="../posix/" title="POSIX Namespace" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                POSIX Namespace
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1.2",url:{base:"../.."}})</script>
      
        <script src="../../js/version-select.js"></script>
      
    
  </body>
</html>